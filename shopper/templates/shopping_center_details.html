{% extends "layouts/_base.html" %}

{% load static %}

{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
{% endblock %}

{% block container %}

<div class="max-w-7xl mx-auto mb-2 sm:pl-11 lg:px-10 xl:px-9 min-h-max">
    <!-- Mobile  -->
    <div class="sm:hidden" id="mobile-container">
        <div class="px-4">
            <div
                class="card bg-white border border-neutral-200 cursor-pointer hover:shadow-sm pt-12 mt-20 px-2 sm:hidden lg:block">
                <div class="relative">
                    <div class="absolute -top-[95px] left-1/2 transform -translate-x-1/2 -mt-4">
                        <div class=" rounded-full w-[120px]">
                            <img src="{% static 'img/shopping_center/'|add:sc.image %}" alt="Shoes"
                                class="rounded-full" />
                        </div>
                    </div>
                    <span class="absolute -top-[42px] right-0 mt-2 mr-2 rounded-full bg-w-light-gray p-1 cursor-pointer"
                        id="favorite-span_{{ sc.id }}" onclick="favoriteBtn(this)">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6 text-white favorite stroke-red-600"
                            id="favorite_{{ sc.id }}">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                        </svg>
                    </span>
                </div>
                <div class="card-body px-4 pt-2 pb-3">
                    <div class="mt-3 card-title font-medium text-neutral-800 text-xl items-baseline line-clamp-2 pr-16">
                        {{ sc.name }}
                    </div>
                    <div class="line-clamp-2 font-normal text-sm text-w-indigo ">
                        {{ sc.location }}
                    </div>
                    <div class="pt-px bg-w-light-gray my-1.5"></div>
                    <div class="text-neutral-800">
                        <div class="text-sm font-normal text-neutral-800 pb-2">
                            {{ sc.description }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-sm flex gap-1 items-center font-normal no-underline my-7 px-4">
            <a href="{% url 'shopping-centers' %}"
                class="text-neutral-400 hover:text-neutral-800 hover:underline">Shopping
                Center</a>
            <span class="material-icons-outlined text-neutral-400">
                chevron_right
            </span>
            <span class="text-neutral-800">{{ sc.name }}</span>
        </div>
        <div class="flex justify-between items-center gap-4 mt-2 px-4">
            <div class="flex justify-end items-center align-middle relative w-full">
                <input type="text" placeholder="Search inventory or retailers" name="search"
                    class="input pr-16 text-ellipsis bg-white h-10 w-full text-sm rounded-full focus:ring-transparent focus:ring-0 placeholder-neutral-400"
                    id="search" />
                <button id="searchBtn" class=" bg-w-indigo h-8 w-8 rounded-full cursor-pointer mr-1 flex justify-center items-center
                        absolute">
                    <img src="{% static 'img/icons/icon-search.svg' %}" id="searchIcon" class="filter invert" />
                </button>
            </div>
            <button class="sm:hidden bg-w-primary border-w-primary p-2 
            flex items-center rounded-md text-center" id="openDrawer">
                <span class="material-icons text-white">
                    filter_alt
                </span>
            </button>
            <div id="overlay"
                class="fixed sm:hidden inset-0 bg-black opacity-0 pointer-events-none transition-opacity duration-300 z-50">
            </div>

            <div id="drawer"
                class="fixed bottom-0 left-0 w-full h-0 bg-white overflow-hidden transition-all duration-300 z-50 rounded-t-2xl sm:hidden">
                <div class="h-full">
                    <div class="flex items-center justify-between text-w-dark-green px-6 pt-6 pb-2">
                        <span class="font-medium text-xl">Filters</span>
                        <span class="material-icons-outlined" id="closeDrawer">
                            close
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-w-dark-green px-10 pt-3">
                        <span class="font-medium text-xl">Categories</span>
                        <span class="material-icons-outlined">
                            expand_less
                        </span>
                    </div>
                    <div class="space-y-4 px-10 pt-6">
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Antique (25)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Bakery (7)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Boutique Clothing store (41)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Gas station (2)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Hair Salon / Barber (6)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                        <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                            <span class="font-normal text-sm">Restaurants (14)</span>
                            <span class="material-icons-outlined">
                                expand_more
                            </span>
                        </div>
                    </div>
                    <div class="flex justify-center border-t px-6 py-4 border-w-primary mt-6">
                        <button type="submit"
                            class="bg-w-primary text-white btn-block text-sm font-semibold capitalize border-w-light-gray rounded-full h-10">
                            Apply
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Retailers slider -->
        <div class="max-w-7xl mx-auto mt-6 pl-4">
            <div class="flex justify-between items-center mb-2 pr-4">
                <div class="text-xl sm:text-2xl text-w-dark-green font-medium">Retailers</div>
                <a href="{% url 'retailers' %}" class="text-xs text-w-indigo font-semibold sm:text-sm">See more</a>
            </div>
            <div class="relative hidden lg:block">
                <span class="absolute top-60 -left-4 hidden cursor-pointer" id="prev-button-retailers-mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="w-6 h-6 text-w-secondary">
                        <path fill-rule="evenodd"
                            d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"
                            clip-rule="evenodd" />
                    </svg>
                </span>
                <span class="absolute top-60 -right-4 cursor-pointer" id="next-button-retailers-mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="w-6 h-6 text-w-secondary">
                        <path fill-rule="evenodd"
                            d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
                            clip-rule="evenodd" />
                    </svg>
                </span>
            </div>
            <swiper-container init="false" class="lg:px-3" id="retailers-slider-mobile">
                {% for retailer in retailers %}
                <swiper-slide
                    class="py-2 w-[240px] lg:w-[282px] rounded-2xl {% if forloop.last %} mr-4 md:mr-11 lg:mr-0 {% endif %}">
                    {% include "components/retailer_card.html" with retailer=retailer %}
                </swiper-slide>
                {% endfor %}
            </swiper-container>
        </div>

        <div class="px-4">
            <div class="divider bg-w-primary opacity-50 h-px"></div>
        </div>
        <!-- Product slider -->
        <div class="max-w-7xl mx-auto pt-2 pl-4">
            <div class="flex justify-between items-center mb-2 pr-4">
                <div class="text-xl md:text-2xl text-w-dark-green font-medium">Recommended inventory</div>
            </div>
            <div class="relative hidden lg:block">
                <span class="absolute top-60 -left-4 hidden cursor-pointer" id="prev-button-products-mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="w-6 h-6 text-w-secondary">
                        <path fill-rule="evenodd"
                            d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"
                            clip-rule="evenodd" />
                    </svg>
                </span>
                <span class="absolute top-60 -right-4 cursor-pointer" id="next-button-products-mobile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="w-6 h-6 text-w-secondary">
                        <path fill-rule="evenodd"
                            d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
                            clip-rule="evenodd" />
                    </svg>
                </span>
            </div>
            <swiper-container init="false" class="lg:px-3" id="products-slider-mobile">
                {% for product in products %}
                <swiper-slide
                    class="py-2 w-[255px] rounded-2xl {% if forloop.last %} mr-4 md:mr-11 lg:mr-0 {% endif %}">
                    {% include "components/product_card.html" with product=product %}
                </swiper-slide>
                {% endfor %}
            </swiper-container>
        </div>
    </div>

    <!-- Tablet and Desktop -->
    <div class="hidden sm:block" id="container">
        <div class="pr-10 lg:pr-0">
            <img src="{% static 'img/shopping_center/cover.jpg' %}" alt="tablet"
                class="w-full h-[250px] object-cover rounded-xl">
            <div class="relative">
                <div
                    class="absolute -top-[65px] transform -translate-x-1/2 -mt-4 left-[120px] lg:left-[110px] xl:left-[140px]">
                    <div class="rounded-full sm:w-[150px]">
                        <img src="{% static 'img/shopping_center/'|add:sc.image %}" alt="Logo"
                            class="sm:w-[150px] sm:h-[150px] rounded-full object-cover" />
                    </div>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-8 lg:grid-cols-12 gap-6">
            <div class="col-span-3 pt-20">
                <div class="flex items-baseline justify-between gap-4">
                    <div class="text-2xl font-medium text-w-dark-green block self-end h-[64px] line-clamp-2">
                        {{ sc.name }}
                    </div>
                    <span class="rounded-full bg-w-light-gray p-1 cursor-pointer"
                        id="favorite-span_{{ retailer.id }}tablet" onclick="favoriteBtn(this)">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-6 h-6 text-white favorite stroke-red-600"
                            id="favorite_{{ retailer.id }}tablet">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                        </svg>
                    </span>
                </div>
                <div class="flex justify-end flex-col gap-2 mt-2 border-b border-w-primary pb-7">
                    <div class="line-clamp-2 font-normal text-sm text-w-indigo pb-2">
                        {{ sc.location }}
                    </div>
                    <div class="text-sm text-neutral-800 line-clamp-5">
                        {{ sc.description }}
                    </div>
                </div>
                <div class="flex items-center justify-between text-w-dark-green pt-7 pr-3">
                    <span class="font-medium text-2xl">Categories</span>
                    <span class="material-icons-outlined">
                        expand_less
                    </span>
                </div>
                <div class="space-y-4 pt-6 px-3">
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Antique (25)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Bakery (7)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Boutique clothing store (41)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Gas station (2)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Hair Salon / Barber (6)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                    <div class="flex items-center justify-between text-neutral-800 cursor-pointer">
                        <span class="font-normal text-sm">Restaurants (14)</span>
                        <span class="material-icons-outlined">
                            expand_more
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-start-4 col-span-5 lg:col-span-9 pt-6">
                <div class="flex items-center justify-between pr-10 lg:pr-0 lg:w-full">
                    <div class="text-sm flex gap-1 items-center font-normal no-underline lg:w-full">
                        <a href="{% url 'shopping-centers' %}"
                            class="text-neutral-400 hover:text-neutral-800 hover:underline lg:w-[145px]">Shopping
                            Center</a>
                        <span class="material-icons-outlined text-neutral-400">
                            chevron_right
                        </span>
                        <span class="text-neutral-800 line-clamp-1 w-[132px] lg:w-full">{{ sc.name }}</span>
                    </div>
                    <div class="hidden sm:block">
                        <a href="{% url 'shopping-centers' %}"
                            class="border border-w-primary text-w-primary btn-block text-sm font-semibold rounded-lg capitalize h-10 px-6 py-1.5">
                            Back
                        </a>
                    </div>
                </div>
                <div class="flex justify-end items-center align-middle relative w-full mt-9 pr-10 lg:pr-0">
                    <input type="text" placeholder="Search inventory or retailers" name="search"
                        class="input pr-16 text-ellipsis bg-white h-10 w-full text-sm rounded-full focus:ring-transparent focus:ring-0 placeholder-neutral-400"
                        id="search" />
                    <button id="searchBtn" class=" bg-w-indigo h-8 w-8 rounded-full cursor-pointer mr-1 flex justify-center items-center
                            absolute">
                        <img src="{% static 'img/icons/icon-search.svg' %}" id="searchIcon" class="filter invert" />
                    </button>
                </div>
                <!-- Retailers slider -->
                <div class="max-w-7xl mx-auto mt-6">
                    <div class="flex justify-between items-center mb-6 pr-10 lg:pr-0">
                        <div class="text-xl sm:text-2xl text-w-dark-green font-medium">Retailers</div>
                        <a href="{% url 'retailers' %}" class="text-xs text-w-indigo font-semibold sm:text-sm">See
                            more</a>
                    </div>
                    <div class="relative hidden">
                        <span class="absolute top-60 -left-4 hidden cursor-pointer" id="prev-button-retailers">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                class="w-6 h-6 text-w-secondary">
                                <path fill-rule="evenodd"
                                    d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"
                                    clip-rule="evenodd" />
                            </svg>
                        </span>
                        <span class="absolute top-60 -right-4 cursor-pointer" id="next-button-retailers">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                class="w-6 h-6 text-w-secondary">
                                <path fill-rule="evenodd"
                                    d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
                                    clip-rule="evenodd" />
                            </svg>
                        </span>
                    </div>
                    <swiper-container init="false" class="lg:px-3 lg:hidden" id="retailers-slider">
                        {% for retailer in retailers %}
                        <swiper-slide
                            class="py-2 w-[282px] rounded-2xl {% if forloop.last %} mr-4 sm:mr-11 lg:mr-0 {% endif %}">
                            {% include "components/retailer_card.html" with retailer=retailer device="tabletret" %}
                        </swiper-slide>
                        {% endfor %}
                    </swiper-container>

                    <!-- Desktop -->
                    <div class="grid grid-cols-9 xl:grid-cols-12 gap-5">
                        {% for retailer in retailers|slice:":6" %}
                        <div class="col-span-3 xl:col-span-4">
                            <div
                                class="w-56 xl:w-[282px] rounded-2xl {% if forloop.last %} sm:mr-11 lg:mr-0 {% endif %} hidden lg:block">
                                {% include "components/retailer_card.html" with retailer=retailer device="desktopret" %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="mr-1 mt-2">
                    <div class="divider bg-w-primary opacity-50 h-px"></div>
                </div>

                <!-- Product slider -->
                <div class="max-w-7xl mx-auto pt-3">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-xl sm:text-2xl text-w-dark-green font-medium">Recommended inventory</div>
                    </div>
                    <div class="relative hidden lg:block">
                        <span class="absolute top-60 -left-10 hidden cursor-pointer" id="prev-button-products">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                class="w-6 h-6 text-w-secondary">
                                <path fill-rule="evenodd"
                                    d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"
                                    clip-rule="evenodd" />
                            </svg>
                        </span>
                        <span class="absolute top-60 -right-8 cursor-pointer" id="next-button-products">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                class="w-6 h-6 text-w-secondary">
                                <path fill-rule="evenodd"
                                    d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
                                    clip-rule="evenodd" />
                            </svg>
                        </span>
                    </div>
                    <swiper-container init="false" id="products-slider">
                        {% for product in products %}
                        <swiper-slide
                            class="py-2 w-[245px] xl:w-[282px] rounded-2xl {% if forloop.last %} mr-4 sm:mr-11 lg:mr-0 {% endif %}">
                            {% include "components/product_card.html" with product=product device="tabdeskprod" %}
                        </swiper-slide>
                        {% endfor %}
                    </swiper-container>
                </div>
            </div>
        </div>
    </div>


    {% endblock container %}

    {% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-element-bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"
        integrity="sha512-CEiA+78TpP9KAIPzqBvxUv8hy41jyI3f2uHi7DGp/Y/Ka973qgSdybNegWFciqh6GrN2UePx2KkflnQUbUhNIA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/shortcuts/infinite.min.js"
        integrity="sha512-m3kH21aSkKrGeoqdb7IP7rlu1VcQee5VrjLQepeSOp5M05Wl6HwqJ1Jwo14EHOuBg77pkAlBtQuVMPVeXzfueg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{% static 'js/shopper/shopping_center.js' %}"></script>
    {% endblock scripts %}